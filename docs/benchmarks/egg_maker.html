<html>
 <head>
  <script type="text/javascript" src="html2canvas.min.js"></script>
  <style type="text/css">
body { margin:0; overflow:hidden; }

.egg-capture {
    position: relative;
    width: 1024px;
    height: 1024px;
    background-image: url(egg_maker_square.png), url(egg_maker_gradient.png);
    background-size: 100%;
}

.halftone>svg {
    position: absolute;
    width: 1024px;
    height: 1024px;
    z-index: 49;
}

.egg {
    width: 1024px;
    height: 1024px;
    position: absolute;
    z-index: 50;
}

.egg-capture.role-0, .egg-capture.role-0 .halftone>svg { --background-color: #f16c38; }
.egg-capture.role-1, .egg-capture.role-1 .halftone>svg { --background-color: #aced5b; }
.egg-capture.role-2, .egg-capture.role-2 .halftone>svg { --background-color: #fecc51; }
.egg-capture.role-3, .egg-capture.role-3 .halftone>svg { --background-color: #ce5fd3; }
.egg-capture.role-4, .egg-capture.role-4 .halftone>svg { --background-color: #29a5e3; }
.egg-capture.role-alpha, .egg-capture.role-alpha .halftone>svg { --background-color: #f87d17; }
.egg-capture.role-omega, .egg-capture.role-omega .halftone>svg { --background-color: #7f59c1; }

.egg-capture .halftone>svg { color: var(--background-color); }
.egg-capture { background-color: var(--background-color); }
  </style>

  <script type="text/javascript">
    var q = Object.fromEntries((new URLSearchParams(window.location.search)).entries());
    var t = q["t"] ? q["t"] : "snorlax";
    var r = q["r"] ? q["r"] : "none";

    function saveAs(uri, filename) {
      var link = document.createElement('a');

      if (typeof link.download === 'string') {
        link.href = uri;
        link.download = filename;

        //Firefox requires the link to be in the body
        document.body.appendChild(link);

        //simulate click
        link.click();

        //remove the link when done
        document.body.removeChild(link);
      } else {
        window.open(uri);
      }
    }

    window.onload = function() {
      //document.getElementById("egg").style["background-image"] = "url(https://loshuevostv.github.io/ovl/v2/eggs/"+ t +".png)";
      document.getElementById("egg-capture").classList.add("role-"+ r);

      setTimeout(function() {
        html2canvas(document.getElementById("egg-capture"), { letterRendering: 1, width: 1024, height: 1024, scale: 1 }).then(function(canvas) {
          saveAs(canvas.toDataURL("image/png"), t +'-egg.png');
        });
      }, 1000);
    };
  </script>
 </head>
 <body>
   <div id="egg-capture" class="egg-capture">
    <div id="egg" class="egg"></div>
   </div>
  </div>
 </body>
</html>